IF(WIN32)
	IF(MSVC AND (CMAKE_GENERATOR MATCHES "^Visual Studio"))
		MESSAGE(${CMAKE_GENERATOR_PLATFORM}) 
		IF((CMAKE_GENERATOR_PLATFORM STREQUAL "x64") OR (CMAKE_GENERATOR MATCHES "Win64"))
			SET(TORCH_ARCH_NAME "x64")
			SET(TORCH_VS_PLATFORM_NAME "x64")
		ELSEIF((CMAKE_GENERATOR_PLATFORM STREQUAL "ARM64") OR (CMAKE_GENERATOR MATCHES "ARM64"))
			SET(TORCH_ARCH_NAME "arm64")
			SET(TORCH_VS_PLATFORM_NAME "ARM64")
		ELSE()
			MESSAGE(FATAL_ERROR "This CPU architecture is not supported")
		ENDIF()
	ENDIF()

    SET(TORCH_PLATFORM_NAME "win")
    SET(TORCH_PLATFORM_WINDOWS_DESKTOP TRUE)
	SET(TORCH_PLATFORM_WINDOWS TRUE)

ELSEIF(ANDROID)
	SET(TORCH_PLATFORM_NAME "android")
	SET(TORCH_PLATFORM_ANDROID TRUE)
ELSEIF(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
	SET(TORCH_PLATFORM_NAME "linux")
	SET(TORCH_PLATFORM_LINUX TRUE)
ELSEIF(IOS)
	SET(TORCH_PLATFORM_NAME "ios")
	SET(TORCH_PLATFORM_IOS TRUE)
ELSEIF(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
	IF(IOS)
		SET(TORCH_PLATFORM_NAME "ios")
		SET(TORCH_PLATFORM_IOS TRUE)
	ELSE()
		SET(TORCH_PLATFORM_NAME "darwin")
		SET(TORCH_PLATFORM_DARWIN TRUE)
	ENDIF()
ENDIF()

IF(${CMAKE_HOST_SYSTEM_NAME} STREQUAL "Windows")
	SET(TORCH_HOST_PLATFORM_NAME "win")
	SET(TORCH_HOST_PLATFORM_WINDOWS TRUE)
ELSEIF(${CMAKE_HOST_SYSTEM_NAME} STREQUAL "Linux")
	SET(TORCH_HOST_PLATFORM_NAME "linux")
	SET(TORCH_HOST_PLATFORM_LINUX TRUE)
ELSEIF(${CMAKE_HOST_SYSTEM_NAME} STREQUAL "Darwin")
	SET(TORCH_HOST_PLATFORM_NAME "darwin")
	SET(TORCH_HOST_PLATFORM_DARWIN TRUE)
ENDIF()

IF(NOT TORCH_ARCH_NAME)
	IF((CMAKE_SYSTEM_PROCESSOR MATCHES "AMD64") OR (CMAKE_SYSTEM_PROCESSOR MATCHES "x86_64"))
		SET(TORCH_ARCH_NAME "x64")
	ELSE()
		SET(TORCH_ARCH_NAME "x86")
	ENDIF()
ENDIF()

IF((CMAKE_HOST_SYSTEM_PROCESSOR MATCHES "AMD64") OR (CMAKE_HOST_SYSTEM_PROCESSOR MATCHES "x86_64"))
	SET(TORCH_HOST_ARCH_NAME "x64")
ELSE()
	SET(TORCH_HOST_ARCH_NAME "x86")
ENDIF()

SET(TORCH_PLATFORM_NAME ${TORCH_PLATFORM_NAME}_${TORCH_ARCH_NAME})
SET(TORCH_HOST_PLATFORM_NAME ${TORCH_HOST_PLATFORM_NAME}_${TORCH_HOST_ARCH_NAME})

IF(TORCH_PLATFORM_ANDROID OR TORCH_PLATFORM_IOS)
	SET(TORCH_PREFERRED_LIB_TYPE "STATIC")
ELSE()
	SET(TORCH_PREFERRED_LIB_TYPE "SHARED")
ENDIF()

IF (TORCH_PLATFORM_WINDOWS_DESKTOP OR TORCH_PLATFORM_LINUX OR TORCH_PLATFORM_DARWIN)
	SET(TORCH_IS_DEV_PLATFORM TRUE)
ELSE()
	SET(TORCH_IS_DEV_PLATFORM FALSE)
ENDIF()
